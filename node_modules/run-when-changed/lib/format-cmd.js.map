{"version":3,"sources":["../format-cmd.js"],"names":["formatCmd","cmd","fullFilepath","filepath","replace","process","cwd","filedir","fullFiledir","filename","values","s","file","then","rootDir","keys","Object","join","results","RegExp","match","key"],"mappings":";;;;;kBAGwBA,S;;AAHxB;;AACA;;;;;;AAEe,SAASA,SAAT,CAAmBC,GAAnB,EAAwBC,YAAxB,EAAsC;AACnD,MAAMC,WAAWD,aAAaE,OAAb,CAAqBC,QAAQC,GAAR,cAArB,EAA0C,EAA1C,CAAjB;AACA,MAAMC,UAAU,mBAAQJ,QAAR,CAAhB;AACA,MAAMK,cAAc,mBAAQN,YAAR,CAApB;AACA,MAAMO,WAAW,oBAASN,QAAT,CAAjB;AACA,MAAMO,SAAS;AACbH,oBADa;AAEbE,sBAFa;AAGbN,sBAHa;AAIbQ,OAAGR,QAJU;AAKb,oBAAgBK,WALH;AAMb,qBAAiBN;AANJ,GAAf;;AASA;AACA;AACA;AACA,SAAO,qBACJU,IADI,CACC,cADD,EACiBJ,WADjB,EAEJK,IAFI,CAEC;AAAA,WAAWH,OAAO,kBAAP,IAA6B,mBAAQI,OAAR,CAAxC;AAAA,GAFD,EAGJD,IAHI,CAGC,YAAM;AACV,QAAME,OAAOC,OAAOD,IAAP,CAAYL,MAAZ,EAAoBO,IAApB,CAAyB,GAAzB,CAAb;AACA,QAAIC,UAAUjB,IAAIG,OAAJ,CAAY,IAAIe,MAAJ,QAAgBJ,IAAhB,QAAyB,GAAzB,CAAZ,EAA2C,UAACK,KAAD,EAAQC,GAAR;AAAA,aAAgBX,OAAOW,GAAP,CAAhB;AAAA,KAA3C,CAAd;AACA,WAAOH,OAAP;AACD,GAPI,CAAP;AAQD","file":"format-cmd.js","sourcesContent":["import { dirname, basename, sep } from 'path';\nimport find from 'fs-find-root';\n\nexport default function formatCmd(cmd, fullFilepath) {\n  const filepath = fullFilepath.replace(process.cwd() + sep, '');\n  const filedir = dirname(filepath);\n  const fullFiledir = dirname(fullFilepath);\n  const filename = basename(filepath);\n  const values = {\n    filedir,\n    filename,\n    filepath,\n    s: filepath,\n    'full-filedir': fullFiledir,\n    'full-filepath': fullFilepath,\n  };\n\n  // chances are we don't always have to look up package.json folder, but\n  // performance hit of this is probably so insignificant, it's not worth\n  // the time to optimize this... PRs welcome of course :)\n  return find\n    .file('package.json', fullFiledir)\n    .then(rootDir => values['package-json-dir'] = dirname(rootDir))\n    .then(() => {\n      const keys = Object.keys(values).join('|');\n      let results = cmd.replace(new RegExp(`%(${keys})`, 'g'), (match, key) => values[key]);\n      return results;\n    });\n}\n"]}